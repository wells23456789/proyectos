<!--begin::Row-->
<div class="row g-5 g-xl-10">
  <!--begin::Col-->
  
<span class="spinner-border spinner-border-sm align-middle ms-2" *ngIf="isLoading$ | async"></span>

  <div class="col-md-6 col-lg-6 col-xl-6 col-xxl-6 mb-md-5 mb-xl-10" *ngIf="isPermission('grafic_kpi')">
    <div class="row">
      <div class="col-6 mb-md-5 mb-xl-10">
        <div class="row g-5 g-xl-8">
          <div class="col-xl-6">
            <!--begin::Statistics Widget 5-->
            <a href="#" class="card bg-body hoverable card-xl-stretch mb-xl-8">
              <!--begin::Body-->
              <div class="card-body">
                <i class="ki-duotone ki-chart-simple text-primary fs-2x ms-n1">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                  <span class="path4"></span>
                </i>
                <div class="text-gray-900 fw-bold fs-2 mb-2 mt-5" style="font-size: small !important;">{{ total_purchase }} PEN</div>
                <div class="fw-semibold text-gray-400">Total de Compras</div>
              </div>
              <!--end::Body-->
            </a>
            <!--end::Statistics Widget 5-->
          </div>
          <div class="col-xl-6">
            <!--begin::Statistics Widget 5-->
            <a href="#" class="card bg-dark hoverable card-xl-stretch mb-xl-8">
              <!--begin::Body-->
              <div class="card-body">
                <i class="ki-duotone ki-cheque text-gray-100 fs-2x ms-n1">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                  <span class="path4"></span>
                  <span class="path5"></span>
                  <span class="path6"></span>
                  <span class="path7"></span>
                </i>
                <div class="text-gray-100 fw-bold fs-2 mb-2 mt-5" style="font-size: small !important;">+{{ total_clients }}</div>
                <div class="fw-semibold text-gray-100">Nuevos Clientes</div>
              </div>
              <!--end::Body-->
            </a>
            <!--end::Statistics Widget 5-->
          </div>
          <div class="col-xl-6">
            <!--begin::Statistics Widget 5-->
            <a href="#" class="card bg-warning hoverable card-xl-stretch mb-xl-8">
              <!--begin::Body-->
              <div class="card-body">
                <i class="ki-duotone ki-briefcase text-white fs-2x ms-n1">
                  <span class="path1"></span>
                  <span class="path2"></span>
                </i>
                <div class="text-white fw-bold fs-2 mb-2 mt-5" style="font-size: small !important;">{{ sucursal_most_sales ? sucursal_most_sales.total_sales : 0 }} PEN</div>
                <div class="fw-semibold text-white">{{ sucursal_most_sales ? sucursal_most_sales.sucursale_name : '' }}</div>
              </div>
              <!--end::Body-->
            </a>
            <!--end::Statistics Widget 5-->
          </div>
          <div class="col-xl-6">
            <!--begin::Statistics Widget 5-->
            <a href="#" class="card bg-info hoverable card-xl-stretch mb-5 mb-xl-8">
              <!--begin::Body-->
              <div class="card-body">
                <i class="ki-duotone ki-chart-pie-simple text-white fs-2x ms-n1">
                  <span class="path1"></span>
                  <span class="path2"></span>
                </i>
                <div class="text-white fw-bold fs-2 mb-2 mt-5" style="font-size: small !important;">{{ total_sales }} PEN</div>
                <div class="fw-semibold text-white">Total de Ventas</div>
              </div>
              <!--end::Body-->
            </a>
            <!--end::Statistics Widget 5-->
          </div>
        </div>
      </div>
      <div class="col-6 mb-md-5 mb-xl-10">
        <div class="card card-flush h-xl-100">
          <!--begin::Header-->
          <div class="card-header pt-7">
            <!--begin::Statistics-->
            <div class="m-0">
              <!--begin::Heading-->
              <div class="d-flex align-items-center mb-2">
                <!--begin::Title-->
                <span class="fs-2 fw-bold text-gray-800 me-2 lh-1 ls-n2">{{ sales_total_x_sucursales }} PEN</span>
                <!--end::Title-->
                <!--begin::Label-->
                <span class="badge fs-base" [ngClass]="{'badge-light-success': percentage_sales_sucursales >= 0,'badge-light-danger': percentage_sales_sucursales < 0}">
                <i class="ki-duotone ki-arrow-up fs-5 ms-n1" [ngClass]="{'text-success': percentage_sales_sucursales >= 0,'text-danger': percentage_sales_sucursales < 0}">
                  <span class="path1"></span>
                  <span class="path2"></span>
                </i>{{ percentage_sales_sucursales }}%</span>
                <!--end::Label-->
              </div>
              <!--end::Heading-->
              <!--begin::Description-->
              <span class="fs-6 fw-semibold text-gray-500">Ventas X Sucursales</span>
              <!--end::Description-->
            </div>
            <!--end::Statistics-->
            <!--begin::Toolbar-->
            <div class="card-toolbar">
              <!--begin::Menu-->
              <button class="btn btn-icon btn-color-gray-500 btn-active-color-primary justify-content-end" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-overflow="true">
                <i class="ki-duotone ki-dots-square fs-1 text-gray-500 me-n1">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                  <span class="path4"></span>
                </i>
              </button>
              <!--begin::Menu 2-->
              <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px" data-kt-menu="true">
                <!--begin::Menu item-->
                <div class="menu-item px-3">
                  <div class="menu-content fs-6 text-gray-900 fw-bold px-3 py-4">Busqueda: </div>
                </div>
                <!--end::Menu item-->
                <!--begin::Menu separator-->
                <div class="separator mb-3 opacity-75"></div>
                <!--end::Menu separator-->
                
                <div class="px-3">
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="year"
                    placeholder="Filtrar por Año"
                    [(ngModel)]="year"
                  >
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                      <option value="2026">2026</option>
                  </select>
                  <small class="form-text text-muted"
                    ><b>Filtrar</b> por Año</small >
              </div>
              <div class="px-3">
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="month"
                    placeholder="Filtrar por Mes"
                    [(ngModel)]="month"
                  >
                  <option value="01">Enero</option>
                  <option value="02">Febrero</option>
                  <option value="03">Marzo</option>
                  <option value="04">Abril</option>
                  <option value="05">Mayo</option>
                  <option value="06">Junio</option>
                  <option value="07">Julio</option>
                  <option value="08">Agosto</option>
                  <option value="09">Septiembre</option>
                  <option value="10">Octubre</option>
                  <option value="11">Noviembre</option>
                  <option value="12">Diciembre</option>
                  </select>
                  <small class="form-text text-muted"
                  ><b>Filtrar</b> por Mes</small>
              </div>
                
                <!--begin::Menu separator-->
                <div class="separator mt-3 opacity-75"></div>
                <!--end::Menu separator-->
                <!--begin::Menu item-->
                <div class="menu-item px-3">
                  <div class="menu-content px-3 py-3">
                    <a class="btn btn-primary btn-sm px-4" href="#" onclick="return false"
                    (click)="salesXSucursales()">Generate Reports</a>
                  </div>
                </div>
                <!--end::Menu item-->
              </div>
              <!--end::Menu 2-->
              <!--end::Menu-->
            </div>
            <!--end::Toolbar-->
          </div>
          <!--end::Header-->
          <!--begin::Body-->
          <div class="card-body p-0">
            <div *ngIf="sales_x_sucursales" id="kt_charts_widget_27" class="min-h-auto"></div>
          </div>
          <!--end::Body-->
        </div>
      </div>
    </div>
  </div>
  <!--end::Col-->
  <!--begin::Col-->
  <!-- <app-engage-widget10 class="col-xxl-6" cssClass="h-md-100"></app-engage-widget10> -->
  <div class="col-xxl-6" cssClass="h-md-100" *ngIf="isPermission('grafic_kpi')">
    <div class="card card-flush overflow-hidden">
      <div class="card-header py-5">
        <!--begin::Title-->
        <h3 class="card-title align-items-start flex-column">
          <span class="card-label fw-bold text-gray-900">Ventas X Dia del Mes</span>
          <!-- <span class="text-gray-500 mt-1 fw-semibold fs-6">Users from all channels</span> -->
        </h3>
        <!--end::Title-->
        <!--begin::Toolbar-->
        <div class="card-toolbar">
          <!--begin::Menu-->
          <button class="btn btn-icon btn-color-gray-500 btn-active-color-primary justify-content-end" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-overflow="true">
            <i class="ki-duotone ki-dots-square fs-1">
              <span class="path1"></span>
              <span class="path2"></span>
              <span class="path3"></span>
              <span class="path4"></span>
            </i>
          </button>
          <!--begin::Menu 2-->
          <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px" data-kt-menu="true">
            <!--begin::Menu item-->
            <div class="menu-item px-3">
              <div class="menu-content fs-6 text-gray-900 fw-bold px-3 py-4">Busqueda:</div>
            </div>
            <!--end::Menu item-->
            <!--begin::Menu separator-->
            <div class="separator mb-3 opacity-75"></div>
            <!--end::Menu separator-->
            
            <div class="px-3">
              <select
                class="form-control form-select-solid fw-bolder"
                name="year_2"
                placeholder="Filtrar por Año"
                [(ngModel)]="year_2"
              >
                <option value="2023">2023</option>
                <option value="2024">2024</option>
                <option value="2025">2025</option>
                  <option value="2026">2026</option>
              </select>
              <small class="form-text text-muted"
                ><b>Filtrar</b> por Año</small >
            </div>
            <div class="px-3">
                <select
                  class="form-control form-select-solid fw-bolder"
                  name="month_2"
                  placeholder="Filtrar por Mes"
                  [(ngModel)]="month_2"
                >
                <option value="01">Enero</option>
                <option value="02">Febrero</option>
                <option value="03">Marzo</option>
                <option value="04">Abril</option>
                <option value="05">Mayo</option>
                <option value="06">Junio</option>
                <option value="07">Julio</option>
                <option value="08">Agosto</option>
                <option value="09">Septiembre</option>
                <option value="10">Octubre</option>
                <option value="11">Noviembre</option>
                <option value="12">Diciembre</option>
                </select>
                <small class="form-text text-muted"
                ><b>Filtrar</b> por Mes</small>
            </div>
            <div class="px-3">
              <select
                class="form-control form-select-solid fw-bolder"
                name="sucursale_deliverie_id"
                placeholder="Filtrar por Sucursal"
                [(ngModel)]="sucursale_deliverie_id"
              >
                <option value="">Todos</option>
                <ng-container *ngFor="let sucursale_deliverie of sucursale_deliveries">
                  <option [value]="sucursale_deliverie.id">{{ sucursale_deliverie.name }}</option>
                </ng-container>
              
              </select>
              <small class="form-text text-muted"
              ><b>Filtrar</b> por Sucursal</small>
          </div>
            
            <!--begin::Menu separator-->
            <div class="separator mt-3 opacity-75"></div>
            <!--end::Menu separator-->
            <!--begin::Menu item-->
            <div class="menu-item px-3">
              <div class="menu-content px-3 py-3">
                <a class="btn btn-primary btn-sm px-4" href="#" onclick="return false;" (click)="salesXDayMonth()">Generate Reports</a>
              </div>
            </div>
            <!--end::Menu item-->
          </div>
          <!--end::Menu 2-->
          <!--end::Menu-->
        </div>
        <!--end::Toolbar-->
      </div>
      <div class="card-body d-flex justify-content-between flex-column pb-1 px-0">
        <!--begin::Statistics-->
        <div class="px-9 mb-5">
          <!--begin::Statistics-->
          <div class="d-flex align-items-center mb-2">
            <span class="fs-2hx fw-bold text-gray-800 me-2 lh-1 ls-n2">{{ sales_total_x_day_month }}</span>
            <span class="fs-4 fw-semibold text-gray-500 align-self-start me-1"> PEN</span>
            
            <span class="badge  fs-base" [ngClass]="{'badge-light-success': percentage_sales_x_day_month >= 0, 'badge-light-danger': percentage_sales_x_day_month < 0}">
            <i class="ki-duotone ki-arrow-up fs-5 ms-n1" [ngClass]="{'text-success': percentage_sales_x_day_month >= 0, 'text-danger': percentage_sales_x_day_month < 0}">
              <span class="path1"></span>
              <span class="path2"></span>
            </i>{{ percentage_sales_x_day_month }}%</span>
          </div>

          <!--end::Statistics-->
          <!--begin::Description-->
          <span class="fs-6 fw-semibold text-gray-500">Ventas del mes anterior {{ sales_total_before_x_day_month }} PEN</span>
          <!--end::Description-->
        </div>
        <!--end::Statistics-->
        <!--begin::Chart-->
        <div *ngIf="sales_x_day_month" id="kt_charts_widget_3" class="min-h-auto ps-4 pe-6" style="height: 300px"></div>
        <!--end::Chart-->
      </div>
    </div>
  </div>
  <div class="col-12 mt-5" *ngIf="isPermission('grafic_kpi')">
    <div class="row justify-content-center">
      <div class="col-md-7 col-lg-7 col-xl-7 col-xxl-7 mb-md-5 mb-xl-10">
        <div class="row justify-content-center">
          <div class="col-12" *ngIf="year">
            <app-mixed-widget11
              class="card card-xl-stretch mb-xl-8"
              chartColor="danger"
              chartHeight="250px"
              [year]="year"
            ></app-mixed-widget11>
          </div>
        </div>
      </div>
      <div class="col-md-5 col-lg-5 col-xl-5 col-xxl-5 mb-md-5 mb-xl-10">
        <div class="card card-flush h-xl-100">
          <div class="card-header pt-7">
            <!--begin::Title-->
            <h3 class="card-title align-items-start flex-column">
              <span class="card-label fw-bold text-gray-800">Ventas X Segmento de Cliente</span>
              <span class="text-gray-500 mt-1 fw-semibold fs-6">Total: {{ sales_total_x_segment_client }} PEN</span>
            </h3>
            <!--end::Title-->
            <!--begin::Toolbar-->
            <div class="card-toolbar">
              <!--begin::Menu-->
              <button class="btn btn-icon btn-color-gray-500 btn-active-color-primary justify-content-end" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-overflow="true">
                <i class="ki-duotone ki-dots-square fs-1">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                  <span class="path4"></span>
                </i>
              </button>
              <!--begin::Menu 2-->
              <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px" data-kt-menu="true">
                <!--begin::Menu item-->
                <div class="menu-item px-3">
                  <div class="menu-content fs-6 text-gray-900 fw-bold px-3 py-4">Busqueda:</div>
                </div>
                <!--end::Menu item-->
                <!--begin::Menu separator-->
                <div class="separator mb-3 opacity-75"></div>
                <!--end::Menu separator-->
                
                <div class="px-3">
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="year_3"
                    placeholder="Filtrar por Año"
                    [(ngModel)]="year_3"
                  >
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                      <option value="2026">2026</option>
                  </select>
                  <small class="form-text text-muted"
                    ><b>Filtrar</b> por Año</small >
                </div>
                <div class="px-3">
                    <select
                      class="form-control form-select-solid fw-bolder"
                      name="month_3"
                      placeholder="Filtrar por Mes"
                      [(ngModel)]="month_3"
                    >
                    <option value="01">Enero</option>
                    <option value="02">Febrero</option>
                    <option value="03">Marzo</option>
                    <option value="04">Abril</option>
                    <option value="05">Mayo</option>
                    <option value="06">Junio</option>
                    <option value="07">Julio</option>
                    <option value="08">Agosto</option>
                    <option value="09">Septiembre</option>
                    <option value="10">Octubre</option>
                    <option value="11">Noviembre</option>
                    <option value="12">Diciembre</option>
                    </select>
                    <small class="form-text text-muted"
                    ><b>Filtrar</b> por Mes</small>
                </div>
                <div class="px-3">
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="sucursale_deliverie_id_2"
                    placeholder="Filtrar por Sucursal"
                    [(ngModel)]="sucursale_deliverie_id_2"
                  >
                    <option value="">Todos</option>
                    <ng-container *ngFor="let sucursale_deliverie of sucursale_deliveries">
                      <option [value]="sucursale_deliverie.id">{{ sucursale_deliverie.name }}</option>
                    </ng-container>
                  
                  </select>
                  <small class="form-text text-muted"
                  ><b>Filtrar</b> por Sucursal</small>
              </div>
                
                <!--begin::Menu separator-->
                <div class="separator mt-3 opacity-75"></div>
                <!--end::Menu separator-->
                <!--begin::Menu item-->
                <div class="menu-item px-3">
                  <div class="menu-content px-3 py-3">
                    <a class="btn btn-primary btn-sm px-4" href="#" onclick="return false;" (click)="salesXSegmentClient()">Generate Reports</a>
                  </div>
                </div>
                <!--end::Menu item-->
              </div>
              <!--end::Menu 2-->
              <!--end::Menu-->
            </div>
            <!--end::Toolbar-->
          </div>
          <div class="card-body d-flex align-items-end px-0 pt-3 pb-5" *ngIf="sales_x_segment_client">
            <div id="kt_charts_widget_18_chart" class="h-325px w-100 min-h-auto ps-4 pe-6"></div>
          </div>
        </div>
      </div>

    </div>
  </div>
  <!--end::Col-->
</div>
<!--end::Row-->

<!--begin::Row-->
<div class="row gx-5 gx-xl-10" *ngIf="isPermission('grafic_kpi')">
  <div class="col-xxl-7 mb-5 mb-xl-10">
    <!-- begin::Row -->
    <div class="row gy-5 gx-xl-8">
      <div class="col-xxl-5">
        <div class="row g-5 g-xl-8">
          <div class="col-12">
            <div class="card card-xl-stretch mb-xl-8">
              <!--begin::Body-->
              <!--begin::Toolbar-->
              <div class="card-toolbar">
                <!--begin::Menu-->
                <button class="btn btn-icon btn-color-gray-500 btn-active-color-primary justify-content-end" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-overflow="true">
                  <i class="ki-duotone ki-dots-square fs-1">
                    <span class="path1"></span>
                    <span class="path2"></span>
                    <span class="path3"></span>
                    <span class="path4"></span>
                  </i>
                </button>
                <!--begin::Menu 2-->
                <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px" data-kt-menu="true">
                  <!--begin::Menu item-->
                  <div class="menu-item px-3">
                    <div class="menu-content fs-6 text-gray-900 fw-bold px-3 py-4">Busqueda:</div>
                  </div>
                  <!--end::Menu item-->
                  <!--begin::Menu separator-->
                  <div class="separator mb-3 opacity-75"></div>
                  <!--end::Menu separator-->
                  
                  <div class="px-3">
                    <select
                      class="form-control form-select-solid fw-bolder"
                      name="year_4"
                      placeholder="Filtrar por Año"
                      [(ngModel)]="year_4"
                    >
                      <option value="2023">2023</option>
                      <option value="2024">2024</option>
                      <option value="2025">2025</option>
                        <option value="2026">2026</option>
                    </select>
                    <small class="form-text text-muted"
                      ><b>Filtrar</b> por Año</small >
                  </div>
                  <div class="px-3">
                      <select
                        class="form-control form-select-solid fw-bolder"
                        name="month_4"
                        placeholder="Filtrar por Mes"
                        [(ngModel)]="month_4"
                      >
                      <option value="01">Enero</option>
                      <option value="02">Febrero</option>
                      <option value="03">Marzo</option>
                      <option value="04">Abril</option>
                      <option value="05">Mayo</option>
                      <option value="06">Junio</option>
                      <option value="07">Julio</option>
                      <option value="08">Agosto</option>
                      <option value="09">Septiembre</option>
                      <option value="10">Octubre</option>
                      <option value="11">Noviembre</option>
                      <option value="12">Diciembre</option>
                      </select>
                      <small class="form-text text-muted"
                      ><b>Filtrar</b> por Mes</small>
                  </div>
                  
                  <!--begin::Menu separator-->
                  <div class="separator mt-3 opacity-75"></div>
                  <!--end::Menu separator-->
                  <!--begin::Menu item-->
                  <div class="menu-item px-3">
                    <div class="menu-content px-3 py-3">
                      <a class="btn btn-primary btn-sm px-4" href="#" onclick="return false;" (click)="salesXAsesor()">Generate Reports</a>
                    </div>
                  </div>
                  <!--end::Menu item-->
                </div>
                <!--end::Menu 2-->
                <!--end::Menu-->
              </div>
              <!--end::Toolbar-->
              <div class="card-body d-flex align-items-center pt-3 pb-0" *ngIf="asesor_most_sales">
                <div class="d-flex flex-column flex-grow-1 py-2 py-lg-1 me-2">
                  <a href="#" class="fw-bold text-gray-900 fs-4 mb-2 text-hover-primary">{{ asesor_most_sales.asesor }}</a>
                  <span class="fw-semibold text-muted fs-5" *ngIf="asesor_most_sales.gender == 'MASCULINO'">Asesor Comercial</span>
                  <span class="fw-semibold text-muted fs-5" *ngIf="asesor_most_sales.gender == 'FEMENINO'">Asesora Comercial</span>
                </div>
                <img  *ngIf="asesor_most_sales.gender == 'FEMENINO'" src="assets/media/svg/avatars/014-girl-7.svg" alt="" class="align-self-end h-100px" />
                <img *ngIf="asesor_most_sales.gender == 'MASCULINO'"  src="assets/media/svg/avatars/029-boy-11.svg" alt="" class="align-self-end h-100px" />
                <!-- /metronic8/demo1/assets/media/svg/avatars/029-boy-11.svg -->
              </div>
              <!--end::Body-->
              <div class="card-body d-flex align-items-center pt-3 pb-0" *ngIf="!asesor_most_sales">
                <div class="d-flex flex-column flex-grow-1 py-2 py-lg-13 me-2">
                  <a href="#" class="fw-bold text-gray-900 fs-4 mb-2 text-hover-primary">Lisa Bold</a>
                  <span class="fw-semibold text-muted fs-5">Asesora Comercial</span>
                </div>
                <img src="assets/media/svg/avatars/014-girl-7.svg" alt="" class="align-self-end h-100px" />
              </div>
            </div>
          </div>
          <div class="col-12 mt-0">
            <div class="card card-flush">
              <div class="card-header pt-5">
                <!--begin::Title-->
                <div class="card-title d-flex flex-column">
                  <!--begin::Info-->
                  <div class="d-flex align-items-center">
                    <!--begin::Currency-->
                    
                    <!--end::Currency-->
                    <!--begin::Amount-->
                    <span class="fs-2hx fw-bold text-gray-900 me-2 lh-1 ls-n2">{{ asesor_total_most_sales }}</span>
                    <span class="fs-4 fw-semibold text-gray-500 me-1 align-self-start"> PEN</span>
                    <!--end::Amount-->
                    <!--begin::Badge-->
                    <span class="badge  fs-base" [ngClass]="{'badge-light-success': asesor_percentage_v_most_sales >= 0,'badge-light-danger': asesor_percentage_v_most_sales < 0}">
                    <i class="ki-duotone ki-arrow-up fs-5 text-success ms-n1" [ngClass]="{'text-success': asesor_percentage_v_most_sales >= 0,'text-danger': asesor_percentage_v_most_sales < 0}">
                      <span class="path1"></span>
                      <span class="path2"></span>
                    </i>{{ asesor_percentage_v_most_sales }}%</span>
                    <!--end::Badge-->
                  </div>
                  <!--end::Info-->
                  <!--begin::Subtitle-->
                  <span class="text-gray-500 pt-1 fw-semibold fs-6">Ventas Diarios</span>
                  <!--end::Subtitle-->
                </div>
                <!--end::Title-->
              </div>
              <div class="card-body d-flex align-items-end px-0 pb-5" *ngIf="asesor_most_sales">
                <!--begin::Chart-->
                <div id="kt_card_widget_6_chart" class="w-100" style="height: 80px"></div>
                <!--end::Chart-->
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-7">
        <div class="card card-flush h-xl-100">
          <div class="card-body d-flex align-items-end px-0 pt-3 pb-5">
            <div class="d-flex justify-content-between flex-column w-225px w-md-600px mx-auto mx-md-0 pt-3 pb-10">
              <!--begin::Title-->
              <div class="fs-4 fw-bold text-gray-900 text-center mb-5">Ventas X
              <br />Categorias</div>
              <!--end::Title-->
              <ng-container *ngIf="categories_most_sales">
                <div id="kt_chart_widgets_22_chart_1" class="mx-auto mb-4"></div>
              </ng-container>
              
              <!--begin::Chart-->
              <!--end::Chart-->
              <!--begin::Labels-->
              <div class="mx-auto" *ngIf="categories_most_sales">
                <ng-container *ngFor="let categorie of categories_most_sales;let i=index">
                  <!--begin::Label-->
                  <div class="d-flex align-items-center mb-2">
                    <!--begin::Bullet-->
                    <div class="bullet bullet-dot w-8px h-7px me-2" [ngStyle]="{'background-color': getColorTag(i)}"></div>
                    <!--end::Bullet-->
                    <!--begin::Label-->
                    <div class="fs-8 fw-semibold text-muted">{{ categorie.categorie_name }}({{ categorie.count_products }})</div>
                    <!--end::Label-->
                  </div>
                  <!--end::Label-->
                </ng-container>
                

              </div>
              <!--end::Labels-->
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end::Row -->
  </div>
  <!--begin::Col-->
  <div class="col-xxl-5 mb-5 mb-xl-10">
    <!-- <app-cards-widget18 cssClass="h-xl-100" image="./assets/media/stock/600x600/img-65.jpg"></app-cards-widget18> -->
    <div class="card h-md-100">
      <!--begin::Header-->
      <div class="card-header align-items-center border-0">
        <!--begin::Title-->
        <h3 class="fw-bold text-gray-900 m-0">Productos con mas ventas x categorias</h3>
        <!--end::Title-->
        <!--begin::Menu-->
        <button class="btn btn-icon btn-color-gray-500 btn-active-color-primary justify-content-end" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-overflow="true">
          <i class="ki-duotone ki-dots-square fs-1">
            <span class="path1"></span>
            <span class="path2"></span>
            <span class="path3"></span>
            <span class="path4"></span>
          </i>
        </button>
        <!--begin::Menu 2-->
        <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px" data-kt-menu="true">
          <!--begin::Menu item-->
          <div class="menu-item px-3">
            <div class="menu-content fs-6 text-gray-900 fw-bold px-3 py-4">Busqueda</div>
          </div>
          <!--end::Menu item-->
          <!--begin::Menu separator-->
          <div class="separator mb-3 opacity-75"></div>
          <!--end::Menu separator-->
          <div class="px-3">
            <select
              class="form-control form-select-solid fw-bolder"
              name="year_5"
              placeholder="Filtrar por Año"
              [(ngModel)]="year_5"
            >
              <option value="2023">2023</option>
              <option value="2024">2024</option>
              <option value="2025">2025</option>
                <option value="2026">2026</option>
            </select>
            <small class="form-text text-muted"
              ><b>Filtrar</b> por Año</small >
          </div>
          <div class="px-3">
              <select
                class="form-control form-select-solid fw-bolder"
                name="month_5"
                placeholder="Filtrar por Mes"
                [(ngModel)]="month_5"
              >
              <option value="01">Enero</option>
              <option value="02">Febrero</option>
              <option value="03">Marzo</option>
              <option value="04">Abril</option>
              <option value="05">Mayo</option>
              <option value="06">Junio</option>
              <option value="07">Julio</option>
              <option value="08">Agosto</option>
              <option value="09">Septiembre</option>
              <option value="10">Octubre</option>
              <option value="11">Noviembre</option>
              <option value="12">Diciembre</option>
              </select>
              <small class="form-text text-muted"
              ><b>Filtrar</b> por Mes</small>
          </div>
          <!--begin::Menu separator-->
          <div class="separator mt-3 opacity-75"></div>
          <!--end::Menu separator-->
          <!--begin::Menu item-->
          <div class="menu-item px-3">
            <div class="menu-content px-3 py-3">
              <a class="btn btn-primary btn-sm px-4" href="#" onclick="return false" (click)="salesXCategorias()">Generate Reports</a>
            </div>
          </div>
          <!--end::Menu item-->
        </div>
        <!--end::Menu 2-->
        <!--end::Menu-->
      </div>
      <!--end::Header-->
      <!--begin::Body-->
      <div class="card-body pt-2">
        <!--begin::Nav-->
        <ul class="nav nav-pills nav-pills-custom mb-3">
          <ng-container *ngFor="let list_categorie of list_categories">
            <!--begin::Item-->
            <li class="nav-item mb-3 me-3 me-lg-6">
              <!--begin::Link-->
              <a class="nav-link d-flex justify-content-between flex-column flex-center overflow-hidden w-80px h-85px py-4"
              [ngClass]="{'w-80px': list_categorie.name.length <= 6 ,'w-100px': list_categorie.name.length > 6 && list_categorie.name.length <= 14,'w-150px': list_categorie.name.length > 14,
              'active': option_selected == list_categorie.id}"
              onclick="return false;"
              (click)="optionSelected(list_categorie.id,list_categorie.products)"
              data-bs-toggle="pill" href="#kt_stats_widget_2_tab_1">
                <!--begin::Icon-->
                <div class="nav-icon">
                  <img alt="" src="assets/media/svg/products-categories/t-shirt.svg" class="" />
                </div>
                <!--end::Icon-->
                <!--begin::Subtitle-->
                <span class="nav-text text-gray-700 fw-bold fs-6 lh-1">{{ list_categorie.name }}</span>
                <!--end::Subtitle-->
                <!--begin::Bullet-->
                <span class="bullet-custom position-absolute bottom-0 w-100 h-4px bg-primary"></span>
                <!--end::Bullet-->
              </a>
              <!--end::Link-->
            </li>
            <!--end::Item-->
          </ng-container>
          
          
        </ul>
        <!--end::Nav-->
        <!--begin::Tab Content-->
        <div class="tab-content">
          <!--begin::Tap pane-->
          <div class="tab-pane fade show active" id="kt_stats_widget_2_tab_1">
            <!--begin::Table container-->
            <div class="table-responsive">
              <!--begin::Table-->
              <table class="table table-row-dashed align-middle gs-0 gy-4 my-0">
                <!--begin::Table head-->
                <thead>
                  <tr class="fs-7 fw-bold text-gray-500 border-bottom-0">
                    <th class="ps-0 w-50px">ITEM</th>
                    <th class="min-w-125px"></th>
                    <th class="text-end min-w-100px">QTY</th>
                    <th class="pe-0 text-end min-w-100px">PRICE</th>
                    <th class="pe-0 text-end min-w-100px">TOTAL PRICE</th>
                  </tr>
                </thead>
                <!--end::Table head-->
                <!--begin::Table body-->
                <tbody>
                  <ng-container *ngFor="let products_x_categorie of products_x_categories">
                    <tr>
                      <td>
                        <img [src]="products_x_categorie.product_imagen" class="w-50px ms-n1" alt="" />
                      </td>
                      <td class="ps-0">
                        <a [href]="'/productos/list/editar/'+products_x_categorie.product_id" target="_blank" class="text-gray-800 fw-bold text-hover-primary mb-1 fs-6 text-start pe-0">{{ products_x_categorie.product_name }}</a>
                        <span class="text-gray-500 fw-semibold fs-7 d-block text-start ps-0">SKU: {{ products_x_categorie.product_sku }}</span>
                      </td>
                      <td>
                        <span class="text-gray-800 fw-bold d-block fs-6 ps-0 text-end">x{{ products_x_categorie.count_products }}</span>
                      </td>
                      <td class="text-end pe-0">
                        <span class="text-gray-800 fw-bold d-block fs-6">{{ products_x_categorie.sub_total_sales }} PEN</span>
                      </td>
                      <td class="text-end pe-0">
                        <span class="text-gray-800 fw-bold d-block fs-6">{{ products_x_categorie.total_sales }} PEN</span>
                      </td>
                    </tr>
                  </ng-container>
                  
                </tbody>
                <!--end::Table body-->
              </table>
              <!--end::Table-->
            </div>
            <!--end::Table container-->
          </div>
          <!--end::Tap pane-->
        </div>
        <!--end::Tab Content-->
      </div>
      <!--end: Card Body-->
    </div>
  </div>
  <!--end::Col-->
</div>
<!--end::Row-->

